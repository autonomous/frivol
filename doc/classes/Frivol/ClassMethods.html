<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Frivol::ClassMethods</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Frivol::ClassMethods</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/frivol_rb.html">
                lib/frivol.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h2><a href="ClassMethods.html">Frivol::ClassMethods</a></h2>
<p>
These methods are available on the class level when <a
href="../Frivol.html">Frivol</a> is included in the class.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000010">storage_bucket</a>&nbsp;&nbsp;
      <a href="#M000008">storage_expires_in</a>&nbsp;&nbsp;
      <a href="#M000009">storage_expiry</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="ClassMethods.src/M000010.html" target="Code" class="method-signature"
            onclick="popupCode('ClassMethods.src/M000010.html');return false;">
          <span class="method-name">storage_bucket</span><span class="method-args">(bucket, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Create a storage bucket. <a href="../Frivol.html">Frivol</a> creates
store_#{bucket} and retrieve_#{bucket} methods automatically. These methods
work exactly like the default store and retrieve methods except that the
bucket is stored in it&#8216;s own key in Redis and can have it&#8216;s own
expiry time.
</p>
<p>
Counters are special in that they do not store a hash but only a single
integer value and also that the data in a counter is not cached for the
lifespan of the object, but rather each call hits Redis. This is intended
to make counters thread safe (for example you may have multiple workers
working on a job and they can each increment a progress counter which would
not work with the default retrieve/store method that normal buckets use).
For this to actually be thread safe you need to pass the thread safe option
to the config when you make the connection.
</p>
<p>
In the case of a counter, the methods work slightly differently:
</p>
<ul>
<li>store_#{bucket} only takes an integer value to store (no key)

</li>
<li>retrieve_#{bucket} only takes an integer default, and returns only the
integer value

</li>
<li>there is an added increment_#{bucket} method which increments the counter
by 1

</li>
</ul>
<p>
Options are :expires_in which sets the expiry time for a bucket, and
:counter to create a special counter storage bucket.
</p>
        </div>
      </div>

      <div id="method-M000008" class="method-detail">
        <a name="M000008"></a>

        <div class="method-heading">
          <a href="ClassMethods.src/M000008.html" target="Code" class="method-signature"
            onclick="popupCode('ClassMethods.src/M000008.html');return false;">
          <span class="method-name">storage_expires_in</span><span class="method-args">(time, bucket = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Set the storage expiry time in seconds for the default bucket or the bucket
passed.
</p>
        </div>
      </div>

      <div id="method-M000009" class="method-detail">
        <a name="M000009"></a>

        <div class="method-heading">
          <a href="ClassMethods.src/M000009.html" target="Code" class="method-signature"
            onclick="popupCode('ClassMethods.src/M000009.html');return false;">
          <span class="method-name">storage_expiry</span><span class="method-args">(bucket = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get the storage expiry time in seconds for the default bucket or the bucket
passed.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>